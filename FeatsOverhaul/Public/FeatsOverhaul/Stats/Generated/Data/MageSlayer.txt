//  =================================== Mage Slayer: Break Concentration ===================================
// Effect is now an aura and make passive highlighted

new entry "MageSlayer_BreakConcentration"
type "PassiveData"
data "DisplayName" "hc25ffc82g723cgb631gc8e4ga40f25e9fd37;1"
data "Description" "h1c3c654ag6a00g2556g9dd4g04ecf65c7bc2;2"
data "DescriptionParams" "Distance(3)"
data "Icon" "PassiveFeature_MageSlayer_BreakConcentration"
data "Properties" "ToggledDefaultOn;IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(MAGESLAYER_AURA, 100, -1)"
data "ToggleOffFunctors" "RemoveStatus(MAGESLAYER_AURA)"

// New statuses to apply the Mage Slayer aura effect
new entry "MAGESLAYER_AURA"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "PassiveFeature_MageSlayer_BreakConcentration"
data "StackId" "MAGESLAYER_AURA"
data "StackPriority" "10"
data "AuraRadius" "3"
data "AuraStatuses" "TARGET:IF(Enemy()):ApplyStatus(MAGESLAYER_AURA_BUFF)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;IgnoreResting"
data "StatusGroups" "SG_RemoveOnRespec"

new entry "MAGESLAYER_AURA_BUFF"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "he6f81661g867fg4363g8668ge114ae8ee3a4;1"
data "Description" "ha557595dg817cg49d9g9629g17427e8aaa2e;1"
data "Icon" "GenericIcon_Intent_Debuff"
data "StackId" "MAGESLAYER_AURA_BUFF"
data "StackPriority" "5"
data "Boosts" "Disadvantage(Concentration)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog"

// =================================== Mage Slayer: Saving Throw Advantage ===================================
// Now gives advantage on saving throws against all spells (previously melee range only) and also gives damage reduction from spells equal to proficiency bonus. Passive is now highlighted

new entry "MageSlayer_Advantage"
type "PassiveData"
data "DisplayName" "h2361564ag5a28gd2f7gc1e5gcd556cc8ac75;2"
data "Description" "h568c7c2dg2e3dgf8bag8c00g104a2e2415a2;1"
data "Icon" "PassiveFeature_MageSlayer_Advantage"
data "Boosts" "IF(IsSpell()):Advantage(AllSavingThrows);IF(IsSpell()):DamageReduction(All,Flat,ProficiencyBonus)"
data "Properties" "Highlighted"

// =================================== Mage Slayer: Attack Caster ===================================

// new entry "MageSlayer_AttackCaster"
// type "PassiveData"
// // Mage Slayer: Attack Caster
// data "DisplayName" "h3b348abcg1ccbg4ac2gadcbgf97694100813;2"
// // You can use a <LSTag Type="ActionResource" Tooltip="ReactionActionPoint">reaction</LSTag> to make an attack against an enemy after it casts a spell within [1] of you.
// data "Description" "ha36dcc22gd0c0g498fga346ged1bebb7c456;3"
// data "DescriptionParams" "Distance(1.5)"
// data "TooltipUseCosts" "ReactionActionPoint:1"
// data "Icon" "PassiveFeature_MageSlayer_AttackACaster"
// data "Properties" "Highlighted"
// data "Boosts" "UnlockInterrupt(Interrupt_MageSlayer)"

// new entry "Interrupt_MageSlayer"
// type "InterruptData"
// // Mage Slayer
// data "DisplayName" "ha7485350ga681g4861gbd5bg3d4c8df27e98;1"
// // Attack an enemy as a <LSTag Type="ActionResource" Tooltip="ReactionActionPoint">reaction</LSTag> if they cast a spell near you. 
// data "Description" "h9b63daaeg493bg470fga510g69dc14094f35;2"
// data "Icon" "PassiveFeature_MageSlayer_AttackACaster"
// data "InterruptContext" "OnSpellCast"
// data "InterruptContextScope" "Nearby"
// data "Container" "YesNoDecision"
// data "Conditions" "IsAbleToReact(context.Observer) and not Self(context.Source, context.Observer) and Enemy(context.Source, context.Observer) and IsSpell() and not Uninterruptible() and not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and not AnyEntityIsItem()"
// data "Properties" "UseAttack(OBSERVER_SOURCE)"
// data "Cost" "ReactionActionPoint:1"
// data "InterruptDefaultValue" "Ask;Enabled"
// data "EnableCondition" "not HasStatus('SG_Disguise')"
// data "EnableContext" "OnStatusApplied;OnStatusRemoved"
